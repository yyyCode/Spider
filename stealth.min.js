// playwright-stealth basic evasion
// This is a simplified version of stealth evasions to prevent basic headless detection
// In a real scenario, use 'npx playwright-stealth' or the python package

Object.defineProperty(navigator, 'webdriver', {
    get: () => undefined,
});

// Overwrite the `plugins` property to use a custom getter.
Object.defineProperty(navigator, 'plugins', {
    get: () => [1, 2, 3, 4, 5],
});

// Pass the Webgl Test.
const getParameter = WebGLRenderingContext.prototype.getParameter;
WebGLRenderingContext.prototype.getParameter = function(parameter) {
    // UNMASKED_VENDOR_WEBGL
    if (parameter === 37445) {
        return 'Intel Inc.';
    }
    // UNMASKED_RENDERER_WEBGL
    if (parameter === 37446) {
        return 'Intel Iris OpenGL Engine';
    }
    return getParameter(parameter);
};

// Chrome property
window.chrome = {
    runtime: {},
};

// Mock permissions
const originalQuery = window.navigator.permissions.query;
window.navigator.permissions.query = (parameters) => (
    parameters.name === 'notifications' ?
    Promise.resolve({ state: 'denied' }) :
    originalQuery(parameters)
);
